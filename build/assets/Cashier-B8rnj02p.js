import{r as d,k as y,z,c as n,o as r,a as b,u as F,m as K,w as A,d as e,j as k,e as _,A as P,x as C,n as j,F as f,f as g,t as a,h as x,s as Q,W as R}from"./app-CmYmw4sZ.js";import{_ as U}from"./AuthenticatedLayout-DJ1yYA2u.js";const W={class:"flex min-h-screen bg-gray-100"},E={class:"flex-1 md:ml-24 w-full overflow-x-hidden"},G={class:"flex items-center justify-between bg-white p-4 shadow md:hidden safe-area-inset-top"},J={class:"p-3 md:p-6 space-y-4 md:space-y-6 safe-area-inset-bottom"},O={class:"bg-white w-full p-3 rounded-lg shadow-sm flex flex-col md:flex-row justify-between gap-3"},X={class:"relative w-full"},Y={class:"flex space-x-2 overflow-x-auto py-2 -mx-3 px-3 md:mx-0 md:px-0"},Z=["onClick"],ee={class:"flex flex-col lg:flex-row gap-4"},te={class:"w-full lg:w-2/3"},se={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4"},oe=["onClick"],le={class:"font-semibold text-xs md:text-base line-clamp-2"},ne={class:"text-xs text-gray-600"},re={class:"font-bold text-xs md:text-base"},ae={class:"w-full lg:w-1/3 bg-white shadow-md rounded-lg p-3 sticky bottom-0 lg:top-20 max-h-[calc(100vh-4rem)] md:max-h-[calc(100vh-8rem)] overflow-auto"},ie={class:"flex justify-between items-center mb-3"},de={key:0,class:"text-gray-500 text-center py-6"},ue={key:1,class:"space-y-3"},ce={class:"flex-grow pr-2"},me={class:"font-semibold text-sm"},pe={class:"text-xs text-gray-600"},ve={class:"flex items-center"},we=["onClick"],fe={class:"w-6 text-center text-sm"},ge=["onClick"],xe=["onClick"],he={class:"mt-3 pt-2 border-t"},ye={class:"flex justify-between font-semibold text-base"},Ce={__name:"Cashier",setup(be){const m=d([]),l=d([]),u=d(!0),p=d(""),v=d("Semua"),c=d(""),i=d(null),M=[{name:"Semua",active:!0}],B=async()=>{try{const s=await Q.get("/cashier/products");m.value=s.data}catch(s){console.error("Gagal mengambil data produk:",s)}},S=y(()=>{let s=m.value;if(v.value!=="Semua"&&(s=s.filter(t=>t.category===v.value)),p.value){const t=p.value.toLowerCase();s=s.filter(o=>o.name.toLowerCase().includes(t))}return s}),I=s=>{v.value=s},q=y(()=>l.value.reduce((s,t)=>s+t.quantity*t.selling_price,0)),h=s=>{const t=l.value.find(o=>o.id===s.id);t?t.quantity<s.stock&&(t.quantity+=1):s.stock>0&&l.value.push({...s,quantity:1})},D=s=>{const t=m.value.find(o=>o.id===s.id);s.quantity<t.stock&&(s.quantity+=1)},L=s=>{s.quantity>1&&(s.quantity-=1)},V=s=>{l.value=l.value.filter(t=>t.id!==s)},$=()=>{R.post("/logout")},H=()=>{l.value.length>0&&(localStorage.setItem("order",JSON.stringify(l.value)),window.location.href="/payment")},N=()=>{if(!c.value)return;const s=m.value.find(t=>String(t.code)===c.value.trim());s&&h(s),c.value="",i.value&&i.value.focus()},T=()=>{i.value&&i.value.focus()};return z(()=>{B(),setTimeout(()=>{i.value&&i.value.focus()},300)}),(s,t)=>(r(),n(f,null,[b(F(K),{title:"Kasir"}),b(U,null,{default:A(()=>[e("div",W,[k(e("input",{ref_key:"barcodeInput",ref:i,"onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),onKeyup:P(N,["enter"]),type:"text",class:"absolute opacity-0 pointer-events-none",tabindex:"-1",autocomplete:"off"},null,544),[[C,c.value]]),e("aside",{class:j(["bg-white shadow-lg flex flex-col items-center pt-6 fixed inset-y-0 left-0 transition-transform z-30",u.value?"translate-x-0":"-translate-x-full","md:translate-x-0 md:static md:w-24 w-64","safe-area-inset-left"])},[t[6]||(t[6]=e("nav",{class:"flex flex-col items-center gap-10 mt-8 flex-1"},[e("a",{href:"/dashboard",class:"flex flex-col items-center"},[e("div",{class:"p-3 rounded-md text-gray-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h7"})])]),e("span",{class:"text-xs mt-2"},"Dashboard")]),e("a",{href:"",class:"flex flex-col items-center"},[e("div",{class:"p-3 rounded-md bg-purple-100 text-purple-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])]),e("span",{class:"text-xs mt-2"},"Transaksi")])],-1)),e("button",{onClick:$,class:"flex flex-col items-center mt-auto mb-6"},t[5]||(t[5]=[e("div",{class:"p-3 rounded-md"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])],-1),e("span",{class:"text-xs mt-2"},"Logout",-1)]))],2),u.value?(r(),n("div",{key:0,onClick:t[1]||(t[1]=o=>u.value=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden"})):_("",!0),e("div",E,[e("header",G,[e("button",{onClick:t[2]||(t[2]=o=>u.value=!u.value),class:"p-2 -m-2"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),t[8]||(t[8]=e("h1",{class:"text-lg font-semibold"},"Kasir",-1)),t[9]||(t[9]=e("div",{class:"w-8 h-8 rounded-full bg-gray-300"},null,-1))]),e("main",J,[e("button",{onClick:T,class:"mb-2 px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600"}," Scan Barcode "),e("div",O,[e("div",X,[k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>p.value=o),type:"text",placeholder:"Search",class:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-300 text-base"},null,512),[[C,p.value]]),t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",Y,[(r(),n(f,null,g(M,o=>e("button",{key:o.name,onClick:w=>I(o.name),class:j(["px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap",v.value===o.name?"bg-purple-400 text-white":"bg-white text-gray-800 hover:bg-gray-100 active:bg-gray-200"])},a(o.name),11,Z)),64))]),e("div",ee,[e("div",te,[e("div",se,[(r(!0),n(f,null,g(S.value,o=>(r(),n("div",{key:o.id,class:"bg-purple-300 rounded-lg p-2 md:p-4 hover:shadow-lg transition cursor-pointer flex flex-col justify-between h-24 md:h-32 active:bg-purple-400",onClick:w=>h(o)},[e("h4",le,a(o.name),1),e("div",null,[e("p",ne,"Stok: "+a(o.stock),1),e("p",re,a(Number(o.selling_price).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})),1)])],8,oe))),128))])]),e("div",ae,[e("div",ie,[t[12]||(t[12]=e("h3",{class:"text-base font-semibold"},"Pesanan baru",-1)),l.value.length>0?(r(),n("button",{key:0,class:"text-gray-500 hover:text-red-500 active:text-red-600 p-2 -m-2",onClick:t[4]||(t[4]=o=>l.value=[])},t[11]||(t[11]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]))):_("",!0)]),l.value.length===0?(r(),n("div",de," Keranjang kosong ")):(r(),n("div",ue,[(r(!0),n(f,null,g(l.value,o=>(r(),n("div",{key:o.id,class:"flex justify-between items-center border-b pb-3"},[e("div",ce,[e("h4",me,a(o.name),1),e("p",pe,a(Number(o.selling_price).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})),1)]),e("div",ve,[e("button",{onClick:x(w=>L(o),["stop"]),class:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 active:bg-gray-300"},t[13]||(t[13]=[e("svg",{class:"w-3 h-3 md:w-4 md:h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,we),e("span",fe,a(o.quantity),1),e("button",{onClick:x(w=>D(o),["stop"]),class:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-purple-300 flex items-center justify-center text-white active:bg-purple-400"},t[14]||(t[14]=[e("svg",{class:"w-3 h-3 md:w-4 md:h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,ge),e("button",{onClick:x(w=>V(o.id),["stop"]),class:"ml-1 text-gray-400 hover:text-red-500 active:text-red-600 p-1 -m-1"},t[15]||(t[15]=[e("svg",{class:"w-3 h-3 md:w-4 md:h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,xe)])]))),128)),e("div",he,[e("div",ye,[t[16]||(t[16]=e("span",null,"Total",-1)),e("span",null,"Rp "+a(Number(q.value).toLocaleString("id-ID")),1)]),e("button",{onClick:H,class:"mt-3 w-full bg-purple-400 text-white py-2.5 rounded-lg hover:bg-purple-500 active:bg-purple-600 transition text-base flex items-center justify-center"},t[17]||(t[17]=[e("span",null,"Bayar",-1),e("svg",{class:"w-4 h-4 ml-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))])]))])])])])])]),_:1})],64))}};export{Ce as default};
