import{r as p,z as U,c as l,o as n,a as y,e as k,u as A,m as E,w as N,d as t,n as r,W as c,j as M,F as m,f as h,t as a,y as j,i as F}from"./app-CmYmw4sZ.js";import{_ as K}from"./AuthenticatedLayout-DJ1yYA2u.js";import O from"./InvoicePrint-BhdBGBSj.js";const W={class:"flex min-h-screen bg-gray-100"},q={class:"flex flex-col items-center gap-10 mt-8 flex-1"},J={class:"flex-1 md:ml-24"},Q={class:"flex items-center justify-between bg-white p-4 shadow md:hidden"},Y={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6 bg-white border-b border-gray-200"},tt={class:"mb-4 flex space-x-4"},et=["value"],st=["value"],ot={key:0},lt={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-white divide-y divide-gray-200"},at={class:"px-6 py-4 whitespace-nowrap"},rt={class:"px-6 py-4 whitespace-nowrap"},it={class:"px-6 py-4 whitespace-nowrap"},dt={class:"px-6 py-4 whitespace-nowrap capitalize"},ut={class:"px-6 py-4 whitespace-nowrap"},pt={class:"px-6 py-4 whitespace-nowrap"},ct=["onClick"],xt=["onClick"],mt={key:0},wt={colspan:"7",class:"px-6 py-4 bg-gray-50"},gt={class:"space-y-2"},vt={class:"min-w-full divide-y divide-gray-200"},ht={class:"px-4 py-2"},ft={class:"px-4 py-2"},yt={class:"px-4 py-2"},kt={key:1,class:"text-gray-500"},bt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Ct={class:"bg-white p-6 rounded-lg max-w-3xl w-full"},_t={class:"flex justify-between items-center mb-4"},Bt={__name:"Sales",props:{sales:Array,months:Array,years:Array},setup(g){const d=p(""),u=p(""),v=p(!1),i=p("laporan"),w=p([]),f=p(!1),b=p(null),P=()=>c.get(route("owner.dashboard")),B=()=>c.get(route("owner.cashier")),D=()=>c.get(route("owner.stock")),L=()=>c.get(route("owner.employees")),T=()=>c.get("/helpdeskowner"),z=()=>c.get(route("owner.sales")),I=()=>c.post(route("logout")),C=o=>{v.value=o===!1?!1:!v.value},S=o=>{const e=w.value.indexOf(o);e===-1?w.value.push(o):w.value.splice(e,1)};U(()=>{const o=new URL(window.location.href),e=o.searchParams.get("month"),s=o.searchParams.get("year");e&&(d.value=e),s&&(u.value=s)});const _=()=>{const o=new URL(window.location.href);d.value?o.searchParams.set("month",d.value):o.searchParams.delete("month"),u.value?o.searchParams.set("year",u.value):o.searchParams.delete("year"),window.location.href=o.toString()},V=()=>{const o=new URL("/export-sales",window.location.origin);d.value&&o.searchParams.append("month",d.value),u.value&&o.searchParams.append("year",u.value),window.location.href=o.toString()},H=o=>{b.value={...o,cashier_name:"Kasir",received_amount:o.total_amount,change:0},f.value=!0},$=()=>{window.print()};return(o,e)=>(n(),l(m,null,[y(A(E),{title:"Data Penjualan"}),y(K,null,{default:N(()=>[t("div",W,[t("aside",{class:r(["bg-white shadow-lg flex flex-col items-center pt-6 fixed inset-y-0 left-0 transition-transform z-30",v.value?"translate-x-0":"-translate-x-full","md:translate-x-0 md:static md:w-24 w-64"])},[t("nav",q,[t("button",{onClick:P,class:"flex flex-col items-center"},[t("div",{class:r(["p-3 rounded-md",i.value==="dashboard"?"bg-purple-100 text-purple-700":"text-gray-500"])},[(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:r(["h-6 w-6",i.value==="dashboard"?"text-purple-700":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h7"},null,-1)]),2))],2),e[6]||(e[6]=t("span",{class:"text-xs mt-2"},"Dashboard",-1))]),t("button",{onClick:B,class:"flex flex-col items-center"},e[7]||(e[7]=[t("div",{class:"p-3 rounded-md"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])],-1),t("span",{class:"text-xs mt-2"},"Transaksi",-1)])),t("button",{onClick:D,class:"flex flex-col items-center"},[t("div",{class:r(["p-3 rounded-md",i.value==="stock"?"bg-purple-100 text-purple-700":"text-gray-500"])},[(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:r(["h-6 w-6",i.value==="stock"?"text-purple-700":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)]),2))],2),e[9]||(e[9]=t("span",{class:"text-xs mt-2"},"Stok barang",-1))]),t("button",{onClick:L,class:"flex flex-col items-center"},[t("div",{class:r(["p-3 rounded-md",i.value==="employees"?"bg-purple-100 text-purple-700":"text-gray-500"])},[(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:r(["h-6 w-6",i.value==="employees"?"text-purple-700":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]),2))],2),e[11]||(e[11]=t("span",{class:"text-xs mt-2"},"Karyawan",-1))]),t("button",{onClick:T,class:"flex flex-col items-center"},e[12]||(e[12]=[t("div",{class:"p-3 rounded-md"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),t("span",{class:"text-xs mt-2"},"Helpdesk",-1)])),t("button",{onClick:z,class:"flex flex-col items-center"},[t("div",{class:r(["p-3 rounded-md",i.value==="laporan"?"bg-purple-100 text-purple-700":"text-gray-500"])},[(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:r(["h-6 w-6",i.value==="laporan"?"text-purple-700":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]),2))],2),e[14]||(e[14]=t("span",{class:"text-xs mt-2"},"Laporan",-1))])]),t("button",{onClick:I,class:"flex flex-col items-center mt-auto mb-6"},e[15]||(e[15]=[t("div",{class:"p-3 rounded-md"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])],-1),t("span",{class:"text-xs mt-2"},"Logout",-1)]))],2),v.value?(n(),l("div",{key:0,onClick:e[0]||(e[0]=s=>C(!1)),class:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden"})):k("",!0),t("div",J,[t("header",Q,[t("button",{onClick:e[1]||(e[1]=s=>C())},e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),e[17]||(e[17]=t("h1",{class:"text-lg font-semibold"},"Data Penjualan",-1)),e[18]||(e[18]=t("div",{class:"w-8 h-8 rounded-full bg-gray-300"},null,-1))]),t("div",Y,[t("div",G,[t("div",X,[t("div",Z,[e[25]||(e[25]=t("h3",{class:"text-lg font-bold mb-4"},"Riwayat Transaksi",-1)),t("div",tt,[M(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),onChange:_,class:"px-4 py-2 border rounded"},[e[19]||(e[19]=t("option",{value:""},"Pilih Bulan",-1)),(n(!0),l(m,null,h(g.months,s=>(n(),l("option",{key:s,value:s},a(s),9,et))),128))],544),[[j,d.value]]),M(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.value=s),onChange:_,class:"px-4 py-2 border rounded"},[e[20]||(e[20]=t("option",{value:""},"Pilih Tahun",-1)),(n(!0),l(m,null,h(g.years,s=>(n(),l("option",{key:s,value:s},a(s),9,st))),128))],544),[[j,u.value]]),t("button",{onClick:V,class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded flex items-center"},e[21]||(e[21]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),F(" Download Excel ")]))]),g.sales.length>0?(n(),l("div",ot,[t("table",lt,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"#"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No. Invoice"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Metode Pembayaran"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Harga"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Detail")])],-1)),t("tbody",nt,[(n(!0),l(m,null,h(g.sales,(s,R)=>(n(),l(m,{key:s.invoice_number},[t("tr",null,[t("td",at,a(R+1),1),t("td",rt,a(s.invoice_number),1),t("td",it,a(s.date),1),t("td",dt,a(s.payment_method),1),t("td",ut,"Rp "+a(parseInt(s.total_amount).toLocaleString("id-ID")),1),t("td",pt,[t("button",{onClick:x=>S(s.invoice_number),class:"text-purple-600 hover:text-purple-900 mr-2"},a(w.value.includes(s.invoice_number)?"Sembunyikan":"Lihat"),9,ct),t("button",{onClick:x=>H(s),class:"text-blue-600 hover:text-blue-900"}," Cetak ",8,xt)])]),w.value.includes(s.invoice_number)?(n(),l("tr",mt,[t("td",wt,[t("div",gt,[e[23]||(e[23]=t("h4",{class:"font-semibold"},"Detail Item:",-1)),t("table",vt,[e[22]||(e[22]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Produk"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Jumlah"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Harga")])],-1)),t("tbody",null,[(n(!0),l(m,null,h(s.items,x=>(n(),l("tr",{key:x.product_name},[t("td",ht,a(x.product_name),1),t("td",ft,a(x.quantity),1),t("td",yt,"Rp "+a(parseInt(x.total_price).toLocaleString("id-ID")),1)]))),128))])])])])])):k("",!0)],64))),128))])])])):(n(),l("div",kt," Tidak ada data penjualan. "))])])])])])])]),_:1}),f.value?(n(),l("div",bt,[t("div",Ct,[t("div",_t,[e[27]||(e[27]=t("h3",{class:"text-lg font-semibold"},"Cetak Invoice",-1)),t("button",{onClick:e[4]||(e[4]=s=>f.value=!1),class:"text-gray-500 hover:text-gray-700"},e[26]||(e[26]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),y(O,{invoice:b.value},null,8,["invoice"]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:$,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," Cetak ")])])])):k("",!0)],64))}};export{Bt as default};
