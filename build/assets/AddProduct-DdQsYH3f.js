import{C as w,r as S,k as v,q as k,s as K,c as i,o as d,a as g,u as t,m as R,w as c,d as e,h as B,j as s,e as m,x as b,t as u,i as p,y as x,F as D}from"./app-CmYmw4sZ.js";import{_ as V}from"./AuthenticatedLayout-DJ1yYA2u.js";const N={class:"py-12"},T={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},M={class:"bg-white shadow-sm rounded-lg p-6 text-gray-900"},U={key:0,class:"text-red-500 text-sm"},A={key:1,class:"p-3 mb-2 bg-yellow-50 border border-yellow-300 rounded"},q={class:"text-sm"},H={class:"font-bold"},_={class:"font-bold"},C={class:"font-bold"},I={class:"font-bold"},E={key:0,class:"text-red-500 text-sm"},L={key:0,class:"text-sm mt-1"},O={class:"font-bold text-blue-700"},j={key:0,class:"text-sm mt-1"},F={class:"font-bold text-green-700"},G={__name:"AddProduct",setup($){const o=w({code:"",name:"",stock:0,average_price:0,selling_price:0,category:"",unit:""}),a=S(null),f=v(()=>o.selling_price-o.average_price),y=v(()=>a.value?Number(a.value.stock)+Number(o.stock):o.stock);k(()=>o.code,async r=>{if(!r){a.value=null;return}try{const l=await K.get(`/employee/stock/check?code=${encodeURIComponent(r)}`);a.value=l.data.product||null}catch{a.value=null}}),k(a,r=>{r&&(o.name=r.name)});function P(){o.post("/employee/stock",{onSuccess:()=>{o.reset(),a.value=null},onError:()=>{}})}return(r,l)=>(d(),i(D,null,[g(t(R),{title:"Tambah Produk"}),g(V,null,{header:c(()=>l[7]||(l[7]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Tambah Produk",-1)])),default:c(()=>[e("div",N,[e("div",T,[e("div",M,[e("form",{onSubmit:B(P,["prevent"]),class:"space-y-6"},[e("div",null,[l[13]||(l[13]=e("label",{class:"block mb-1"},"Kode Produk",-1)),s(e("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>t(o).code=n),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[b,t(o).code]]),t(o).errors.code?(d(),i("div",U,u(t(o).errors.code),1)):m("",!0),a.value?(d(),i("div",A,[l[12]||(l[12]=e("div",{class:"font-semibold text-yellow-700 mb-1"},"Produk ditemukan!",-1)),e("div",q,[e("div",null,[l[8]||(l[8]=p("Stok lama: ")),e("span",H,u(a.value.stock),1)]),e("div",null,[l[9]||(l[9]=p("Harga beli lama: ")),e("span",_,"Rp "+u(Number(a.value.average_price).toLocaleString("id-ID")),1)]),e("div",null,[l[10]||(l[10]=p("Harga jual lama: ")),e("span",C,"Rp "+u(Number(a.value.selling_price).toLocaleString("id-ID")),1)]),e("div",null,[l[11]||(l[11]=p("Keuntungan lama: ")),e("span",I,"Rp "+u(Number(a.value.selling_price-a.value.average_price).toLocaleString("id-ID")),1)])])])):m("",!0)]),e("div",null,[l[14]||(l[14]=e("label",{class:"block mb-1"},"Nama Produk",-1)),s(e("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>t(o).name=n),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[b,t(o).name]]),t(o).errors.name?(d(),i("div",E,u(t(o).errors.name),1)):m("",!0)]),e("div",null,[l[16]||(l[16]=e("label",{class:"block mb-1"},"Stok",-1)),s(e("input",{"onUpdate:modelValue":l[2]||(l[2]=n=>t(o).stock=n),type:"number",class:"w-full border p-2 rounded",required:"",min:"1"},null,512),[[b,t(o).stock,void 0,{number:!0}]]),a.value?(d(),i("div",L,[l[15]||(l[15]=p(" Stok setelah update: ")),e("span",O,u(y.value),1)])):m("",!0)]),e("div",null,[l[17]||(l[17]=e("label",{class:"block mb-1"},"Harga Beli",-1)),s(e("input",{"onUpdate:modelValue":l[3]||(l[3]=n=>t(o).average_price=n),type:"number",class:"w-full border p-2 rounded",required:"",min:"0"},null,512),[[b,t(o).average_price,void 0,{number:!0}]])]),e("div",null,[l[19]||(l[19]=e("label",{class:"block mb-1"},"Harga Jual",-1)),s(e("input",{"onUpdate:modelValue":l[4]||(l[4]=n=>t(o).selling_price=n),type:"number",class:"w-full border p-2 rounded",required:"",min:"0"},null,512),[[b,t(o).selling_price,void 0,{number:!0}]]),t(o).selling_price&&t(o).average_price?(d(),i("div",j,[l[18]||(l[18]=p(" Keuntungan per produk baru: ")),e("span",F,"Rp "+u(f.value.toLocaleString("id-ID")),1)])):m("",!0)]),e("div",null,[l[21]||(l[21]=e("label",{for:"category"},"Kategori",-1)),s(e("select",{"onUpdate:modelValue":l[5]||(l[5]=n=>t(o).category=n),id:"category",class:"w-full border p-2 rounded"},l[20]||(l[20]=[e("option",{value:""},"Pilih Kategori",-1),e("option",{value:"Minuman"},"Minuman",-1),e("option",{value:"Produk Susu"},"Produk Susu",-1),e("option",{value:"Bumbu Dapur"},"Bumbu Dapur",-1),e("option",{value:"Produk Beku & Dingin"},"Produk Beku & Dingin",-1),e("option",{value:"Rokok & Aksesoris"},"Rokok & Aksesoris",-1),e("option",{value:"Kebutuhan Kebersihan Pribadi"},"Kebutuhan Kebersihan Pribadi",-1),e("option",{value:"Kebutuhan Rumah Tangga"},"Kebutuhan Rumah Tangga",-1),e("option",{value:"Perlengkapan Mandi & Cuci"},"Perlengkapan Mandi & Cuci",-1),e("option",{value:"Perlengkapan Bayi & Anak"},"Perlengkapan Bayi & Anak",-1),e("option",{value:"Obat-Obatan Ringan"},"Obat-Obatan Ringan",-1),e("option",{value:"Peralatan Dapur"},"Peralatan Dapur",-1),e("option",{value:"Alat Tulis & Sekolah"},"Alat Tulis & Sekolah",-1),e("option",{value:"Perlengkapan Plastik & Rumah"},"Perlengkapan Plastik & Rumah",-1),e("option",{value:"Pulsa & Token"},"Pulsa & Token",-1),e("option",{value:"Peralatan Elektronik Kecil"},"Peralatan Elektronik Kecil",-1),e("option",{value:"Kosmetik Ringan"},"Kosmetik Ringan",-1),e("option",{value:"Makanan Hewan"},"Makanan Hewan",-1)]),512),[[x,t(o).category]])]),e("div",null,[l[23]||(l[23]=e("label",{for:"unit"},"Unit",-1)),s(e("select",{"onUpdate:modelValue":l[6]||(l[6]=n=>t(o).unit=n),id:"unit",class:"w-full border p-2 rounded"},l[22]||(l[22]=[e("option",{value:"",disabled:""},"Pilih unit",-1),e("option",{value:"pcs"},"pcs",-1),e("option",{value:"box"},"box",-1),e("option",{value:"kg"},"kg",-1),e("option",{value:"liter"},"liter",-1)]),512),[[x,t(o).unit]])]),l[24]||(l[24]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Simpan Produk ",-1))],32)])])])]),_:1})],64))}};export{G as default};
